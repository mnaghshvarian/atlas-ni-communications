// Update each digit
                        for (let i = 0; i < counterDigits.length; i++) {
                            if (i < countStr.length) {
                                counterDigits[i].textContent = countStr[countStr.length - 1 - i];
                            }
                        }
                    }
                }
            };
            
            // Initialize when DOM is loaded
            document.addEventListener('DOMContentLoaded', function() {
                window.wixVisitorTracking.init();
            });
        })();
    </script>

    <!-- JavaScript for all interactive elements -->
    <script>
        // Mobile menu toggle
        const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
        const nav = document.querySelector('nav');
        
        mobileNavToggle.addEventListener('click', () => {
            nav.classList.toggle('active');
        });
        
        // Fade-in animations
        const fadeElements = document.querySelectorAll('.fade-in');
        
        const fadeIn = () => {
            fadeElements.forEach(element => {
                const elementTop = element.getBoundingClientRect().top;
                const windowHeight = window.innerHeight;
                
                if (elementTop < windowHeight - 50) {
                    element.classList.add('active');
                }
            });
        };
        
        // Run on page load
        fadeIn();
        
        // Run on scroll
        window.addEventListener('scroll', fadeIn);
        
        // Back to top button
        const backToTopButton = document.getElementById('backToTop');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopButton.classList.add('visible');
            } else {
                backToTopButton.classList.remove('visible');
            }
        });
        
        backToTopButton.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                const targetId = this.getAttribute('href');
                
                // Handle solution links differently to show their content sections
                if (targetId === '#opti-net' || targetId === '#software-solution' || 
                    targetId === '#hardware-solution' || targetId === '#custom-integration') {
                    showSolution(targetId.substring(1));
                    e.preventDefault();
                    return;
                }
                
                // For all other links, smooth scroll to the target
                if (targetId !== '#') {
                    e.preventDefault();
                    
                    const target = document.querySelector(targetId);
                    if (target) {
                        window.scrollTo({
                            top: target.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });
        
        // Show solution detail and hide others
        function showSolution(solutionId) {
            // First hide all solutions
            const allSolutions = document.querySelectorAll('.solution-detail');
            allSolutions.forEach(solution => {
                solution.style.display = 'none';
            });
            
            // Show the selected solution
            const selectedSolution = document.getElementById(solutionId);
            if (selectedSolution) {
                selectedSolution.style.display = 'block';
                
                // Scroll to the solution
                window.scrollTo({
                    top: selectedSolution.offsetTop - 80,
                    behavior: 'smooth'
                });
                
                // Update URL
                history.pushState(null, '', `#${solutionId}`);
            }
        }
        
        // Check URL hash on page load to show the correct solution
        window.addEventListener('DOMContentLoaded', () => {
            const hash = window.location.hash;
            if (hash && (hash === '#opti-net' || hash === '#software-solution' || 
                hash === '#hardware-solution' || hash === '#custom-integration')) {
                showSolution(hash.substring(1));
            }
            
            // Initialize animated number counters
            const statNumbers = document.querySelectorAll('.stat-number');
            
            statNumbers.forEach(stat => {
                const target = parseInt(stat.getAttribute('data-count'));
                const prefix = stat.getAttribute('data-prefix') || '';
                const suffix = stat.getAttribute('data-suffix') || '';
                let count = 0;
                const updateCount = () => {
                    const increment = target / 50;
                    if (count < target) {
                        count += increment;
                        if (count > target) count = target;
                        stat.textContent = prefix + Math.floor(count) + suffix;
                        requestAnimationFrame(updateCount);
                    } else {
                        stat.textContent = prefix + target + suffix;
                    }
                };
                updateCount();
            });
            
            // Initialize tech feature tabs
            const featureTabs = document.querySelectorAll('.feature-tab');
            const featureContents = document.querySelectorAll('.feature-content');
            
            featureTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    featureTabs.forEach(t => t.classList.remove('active'));
                    featureContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Show corresponding content
                    const featureType = tab.getAttribute('data-feature');
                    document.getElementById(`${featureType}-content`).classList.add('active');
                });
            });
            
            // Initialize API tabs
            const apiTabs = document.querySelectorAll('.api-tab');
            const apiContents = document.querySelectorAll('.api-content');
            
            apiTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs and contents
                    apiTabs.forEach(t => t.classList.remove('active'));
                    apiContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Show corresponding content
                    const apiType = tab.getAttribute('data-api');
                    document.getElementById(`${apiType}-api`).classList.add('active');
                });
            });
            
            // Initialize charts for performance visualization
            if (typeof Chart !== 'undefined') {
                initializeCharts();
            }
        });
        
        // Initialize performance charts
        function initializeCharts() {
            // Performance Chart
            const performanceCtx = document.getElementById('performanceChart').getContext('2d');
            const performanceChart = new Chart(performanceCtx, {
                type: 'bar',
                data: {
                    labels: ['Traditional Solutions', 'Atlas NI Solutions'],
                    datasets: [{
                        label: 'Data Throughput (Gbps)',
                        data: [100, 135],
                        backgroundColor: ['rgba(169, 169, 169, 0.7)', 'rgba(0, 200, 255, 0.7)'],
                        borderColor: ['rgba(169, 169, 169, 1)', 'rgba(0, 200, 255, 1)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Throughput (Gbps)'
                            }
                        }
                    },
                    plugins: {
                        title: {
                            display: true,
                            text: 'Performance Comparison'
                        }
                    }
                }
            });
            
            // Visitor chart
            const visitorCtx = document.getElementById('visitorChart').getContext('2d');
            const visitorChart = new Chart(visitorCtx, {
                type: 'line',
                data: {
                    labels: ['1 AM', '4 AM', '8 AM', '12 PM', '4 PM', '8 PM', 'Now'],
                    datasets: [{
                        label: 'Website Visitors (Today)',
                        data: [12, 19, 58, 125, 180, 210, 235],
                        fill: true,
                        backgroundColor: 'rgba(0, 200, 255, 0.2)',
                        borderColor: 'rgba(0, 200, 255, 1)',
                        tension: 0.4
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false
                }
            });
            
            // Add event listeners to chart tabs
            const chartTabs = document.querySelectorAll('.chart-tab');
            chartTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    // Remove active class from all tabs
                    chartTabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    tab.classList.add('active');
                    
                    // Update chart based on selected tab
                    const chartType = tab.getAttribute('data-chart');
                    updateChart(performanceChart, chartType);
                });
            });
        }
        
        // Update chart based on selected tab
        function updateChart(chart, chartType) {
            if (chartType === 'performance') {
                chart.data = {
                    labels: ['Traditional Solutions', 'Atlas NI Solutions'],
                    datasets: [{
                        label: 'Data Throughput (Gbps)',
                        data: [100, 135],
                        backgroundColor: ['rgba(169, 169, 169, 0.7)', 'rgba(0, 200, 255, 0.7)'],
                        borderColor: ['rgba(169, 169, 169, 1)', 'rgba(0, 200, 255, 1)'],
                        borderWidth: 1
                    }]
                };
                chart.options.plugins.title.text = 'Performance Comparison';
                chart.options.scales.y.title.text = 'Throughput (Gbps)';
            } else if (chartType === 'energy') {
                chart.data = {
                    labels: ['Traditional Solutions', 'Atlas NI Solutions'],
                    datasets: [{
                        label: 'Energy Consumption (W)',
                        data: [16, 12],
                        backgroundColor: ['rgba(169, 169, 169, 0.7)', 'rgba(0, 200, 255, 0.7)'],
                        borderColor: ['rgba(169, 169, 169, 1)', 'rgba(0, 200, 255, 1)'],
                        borderWidth: 1
                    }]
                };
                chart.options.plugins.title.text = 'Energy Efficiency Comparison';
                chart.options.scales.y.title.text = 'Power Consumption (W)';
            } else if (chartType === 'cost') {
                chart.data = {
                    labels: ['Traditional Solutions', 'Atlas NI Solutions'],
                    datasets: [{
                        label: '5-Year Total Cost of Ownership ($K)',
                        data: [250, 175],
                        backgroundColor: ['rgba(169, 169, 169, 0.7)', 'rgba(0, 200, 255, 0.7)'],
                        borderColor: ['rgba(169, 169, 169, 1)', 'rgba(0, 200, 255, 1)'],
                        borderWidth: 1
                    }]
                };
                chart.options.plugins.title.text = 'Cost Comparison';
                chart.options.scales.y.title.text = '5-Year TCO ($K)';
            }
            
            chart.update();
        }
        
        // Form validation and submission
        function validateForm() {
            const form = document.getElementById('contactForm');
            const formSuccess = document.getElementById('formSuccess');
            const formError = document.getElementById('formError');
            
            // Basic form validation
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value;
            
            if (!name || !email || !subject || !message) {
                return false;
            }
            
            // Form destination
            form.action = "https://formspree.io/f/info@aiatlasinc.ca";
            
            // Submit form using Formspree
            const formData = new FormData(form);
            fetch(form.action, {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => {
                if (response.ok) {
                    formSuccess.style.display = 'block';
                    form.reset();
                    if (typeof grecaptcha !== 'undefined') {
                        grecaptcha.reset();
                    }
                } else {
                    throw new Error('Form submission failed');
                }
            })
            .catch(error => {
                formError.style.display = 'block';
                console.error(error);
            });
            
            return false; // Prevent default form submission
        }
    </script>
</body>
</html>
